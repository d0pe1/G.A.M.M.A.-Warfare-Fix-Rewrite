_G.printf = function() end
local phil = dofile('gamma_walo/gamedata/scripts/faction_philosophy.script')

describe('faction_philosophy', function()
    it('contains all faction profiles', function()
        local factions = {
            'duty','freedom','monolith','ecologists','clear_sky',
            'mercenaries','bandits','stalker','renegades','sin','unisg'
        }
        for _, f in ipairs(factions) do
            assert.is.table(phil.data[f])
        end
    end)

    it('priorities are tables', function()
        for _, prof in pairs(phil.data) do
            assert.is.table(prof.priority)
        end
    end)

    it('aggression and diplomacy within bounds', function()
        for _, prof in pairs(phil.data) do
            assert.is_true(prof.aggression >= 0 and prof.aggression <= 1)
            assert.is_true(prof.diplomacy >= 0 and prof.diplomacy <= 1)
        end
    end)

    it('honors ignore lists', function()
        assert.is_true(phil.is_resource_ignored('duty', 'herbs'))
        assert.is_false(phil.is_resource_ignored('duty', 'weapons'))
        assert.is_false(phil.is_resource_ignored('unknown', 'scrap'))
    end)
end)
