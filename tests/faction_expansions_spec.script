dofile("tests/spec_helper.lua")
_dofile = dofile
clsid = {
    bloodsucker_s=1,boar_s=2,burer_s=3,cat_s=4,chimera_s=5,controller_s=6,
    dog_s=7,flesh_s=8,fracture_s=9,gigant_s=10,poltergeist_s=11,pseudodog_s=12,
    psy_dog_phantom_s=13,psy_dog_s=14,rat_s=15,snork_s=16,tushkano_s=17,zombie_s=18
}
warfare = {resource_count = 10}
assert(loadfile('gamma_walo/gamedata/scripts/faction_expansions.script','t',_ENV))()

describe('faction_expansions', function()
    it('calculates spawn chances', function()
        local adv = get_advanced_chance(5)
        local vet = get_veteran_chance(5)
        assert.is_near(86.15, adv, 0.1)
        assert.is_near(25, vet, 0.1)
    end)
end)
