; attempt to fix animation related crashes and reposition issues

![wpn_mossberg590_hud]

; positions
	
        item_position				= 0, 0, 0
        item_orientation			= 0, 0, 0

        hands_position              = 0, 0, 0
        hands_position_16x9         = 0, 0, 0
        hands_orientation                = 0, 0, 0
        hands_orientation_16x9           = 0, 0, 0
	
        aim_hud_offset_pos               = 0, 0.00015, 0
        aim_hud_offset_pos_16x9          = 0, 0.00015, 0
        aim_hud_offset_rot               = 0.003, 0, 0
        aim_hud_offset_rot_16x9          = 0.003, 0, 0

        lowered_hud_offset_pos			= 0.065, -0.036, -0.02
        lowered_hud_offset_pos_16x9		= 0.065, -0.036, -0.02
        lowered_hud_offset_rot			= -0.1, -0.63, 0.4
        lowered_hud_offset_rot_16x9		= -0.1, -0.63, 0.4

; basic anms
        
        anm_show = h_m590_draw, m590_draw
        anm_hide = h_m590_holster, m590_holster

        anm_idle = h_m590_idle, m590_idle
        anm_idle_variant1 = h_m590_idle_v2, m590_idle
        anm_idle_variant2 = h_m590_idle_v3, m590_idle   ; extended h_m590_idle_v1, m590_idle
        
        anm_idle_aim = h_m590_aim_swayless, m590_idle
        ; anm_idle_aim = h_m590_aim_swayless, m590_idle   ; for testing sights
        anm_idle_moving = h_m590_walk, m590_idle, 0.9
        anm_idle_moving_crouch = h_m590_walk, m590_idle, 0.75
        anm_idle_moving_empty_crouch = h_m590_walk, m590_idle, 0.75
        anm_idle_sprint = h_m590_sprint, m590_idle, 1.2

        anm_idle_aim_move = h_m590_aim_swayless, m590_idle, 0.8
        anm_idle_moving_crouch_aim = h_m590_aim_swayless, m590_idle, 0.45
        anm_idle_moving_crouch_empty_aim = h_m590_aim_swayless, m590_idle, 0.45

        anm_shots = h_m590_shoot, m590_shoot
        anm_shots_variant1 = h_m590_shoot_01, m590_shoot_01
        anm_shots_variant2 = h_m590_shoot_02, m590_shoot_02
        anm_shots_aim = h_m590_shoot_aim, m590_shoot_aim
        anm_shots_aim_variant1 = h_m590_shoot_aim_01, m590_shoot_aim_01
        anm_shots_aim_variant2 = h_m590_shoot_aim_02, m590_shoot_aim_02
        

        ; overclamplicated reload
        anm_open_empty = h_m590_open_empty, m590_open_empty, 1.15
        anm_open_ammo1 = h_m590_open_ammo1, m590_open_ammo1, 1.15
        ;anm_open_ammoeven = h_m590_open_ammo3, m590_open_ammo3, 1.15 ; it doesnt exist
        anm_open_ammoodd = h_m590_open_ammo2, m590_open_ammo2, 1.15

        anm_add_cartridge_empty = h_m590_load_empty, m590_load_empty, 1.15
        anm_add_cartridge_ammo1 = h_m590_load_ammo1, m590_load_ammo1, 1.15
        anm_add_cartridge_ammoeven = h_m590_load_ammo2, m590_load_ammo2, 1.15
        anm_add_cartridge_ammoodd = h_m590_load_ammo3, m590_load_ammo3, 1.15

        anm_close_ammo1 = h_m590_close_ammo1, m590_close_ammo1, 1.15
        anm_close_ammoodd = h_m590_close_ammo3, m590_close_ammo3, 1.15
        anm_close_ammoeven = h_m590_close_ammo4, m590_close_ammo4, 1.15

        ; placeholders (needed for npcs for some reason)
        anm_open = h_m590_open_ammo2, m590_open_ammo2, 1.15
        anm_add_cartridge = h_m590_load_ammo3, m590_load_ammo3, 1.15
        anm_close = h_m590_close_ammo4, m590_close_ammo4, 1.15

        
        ; magcheck tubecheck
        anm_ammo_check = h_m590_magcheck, m590_idle
        anm_ammo_check_ammo1 = h_m590_magcheck, m590_magcheck_empty
        anm_ammo_check_empty = h_m590_magcheck, m590_magcheck_empty
        anm_ammo_check_aim = h_m590_magcheck_aim, m590_magcheck_aim
        anm_ammo_check_empty_aim = h_m590_magcheck_aim, m590_magcheck_empty_aim

        ; inspect
        anm_bore = h_m590_inspect, m590_idle
        anm_bore_aim = h_m590_inspect_aim, m590_idle

        anm_empty_fire = h_m590_shoot_empty, m590_shoot_empty
        anm_empty_fire_aim = h_m590_shoot_empty_aim, m590_shoot_empty_aim
        
        ; jammed
        
        ; anm_reload_misfire = h_m590_misfire, m590_misfire
        anm_reload_misfire = h_m590_unjam, m590_unjam
        anm_reload_misfire_aim = h_m590_unjam_aim, m590_unjam_aim
        anm_reload_misfire_jammed = h_m590_unjam, m590_unjam
        anm_reload_misfire_aim_jammed = h_m590_unjam_aim, m590_unjam_aim

        anm_idle_jammed = h_m590_idle_jammed, m590_idle_jammed
        anm_idle_aim_jammed = h_m590_aim_swayless, m590_idle_jammed
        anm_idle_moving_jammed = h_m590_walk_jammed, m590_idle_jammed, 0.9
        anm_idle_moving_crouch_jammed = h_m590_walk_jammed, m590_idle_jammed, 0.75
        anm_idle_moving_empty_crouch_jammed = h_m590_walk_jammed, m590_idle_jammed, 0.75
        anm_idle_sprint_jammed = h_m590_sprint_jammed, m590_idle_jammed, 1.2

        anm_shots_jammed = h_m590_shoot_jammed, m590_shoot_jammed
        anm_show_jammed = h_m590_draw_jammed, m590_draw_jammed
        anm_hide_jammed = h_m590_holster_jammed, m590_holster_jammed

        anm_bore_jammed = h_m590_inspect_jammed, m590_idle_jammed
        anm_bore_aim_jammed = h_m590_inspect_aim_jammed, m590_idle_jammed

        anm_ammo_check_jammed = h_m590_inspect_jammed, m590_idle_jammed
        anm_ammo_check_empty_jammed = h_m590_inspect_jammed, m590_idle_jammed
        anm_ammo_check_aim_jammed = h_m590_inspect_aim_jammed, m590_idle_jammed
        anm_ammo_check_empty_aim_jammed = h_m590_inspect_aim_jammed, m590_idle_jammed


        ; the many many many mamy many transitions

        ts_pattern_closeammo1 = anm_add_cartridge_empty, ^anm_idle.*, anm_close_ammo1, 1
        ts_pattern_closeammo2 = anm_add_cartridge_ammo1, ^anm_idle.*, anm_close_ammoeven, 1
        ts_pattern_closeodd = anm_add_cartridge_ammoeven, ^anm_idle.*, anm_close_ammoodd, 1
        ts_pattern_closeeven = anm_add_cartridge_ammoodd, ^anm_idle.*, anm_close_ammoeven, 1


        ts_pattern_idle2aim = ^anm_idle$, ^anm_idle_aim.*, anm_idle2aim, 4
        ts_pattern_var2aim = ^anm_idle_variant.*, ^anm_idle_aim.*, anm_idle2aim, 4
        ts_pattern_jam2aim = ^anm_idle_jammed.*, ^anm_idle_aim.*, anm_idle2aim, 4
        ts_pattern_moving2aim = ^anm_idle_moving.*, ^anm_idle_aim.*, anm_idle2aim, 4
        ts_pattern_sprint2aim = ^anm_idle_sprint.*, ^anm_idle_aim.*, anm_sprint2aim, 2
        ;ts_pattern_a2i2aim = ^anm_aim2idle.*, ^anm_idle_aim.*, anm_idle2aim, 1

        anm_idle2aim = h_m590_idle2aim, m590_idle
        anm_idle2aim_jammed = h_m590_idle2aim_jammed, m590_idle_jammed

        anm_sprint2aim = h_m590_sprint2aim, m590_idle, 1.1
        anm_sprint2aim_jammed = h_m590_sprint2aim_jammed, m590_idle_jammed, 1.1


        ts_pattern_aim2idle = ^anm_idle_aim.*, ^anm_idle$, anm_aim2idle, 4
        ts_pattern_aim2var = ^anm_idle_aim.*, ^anm_idle_variant.*, anm_aim2idle, 4
        ts_pattern_aim2jam = ^anm_idle_aim.*, ^anm_idle_jammed.*, anm_aim2idle, 4
        ts_pattern_aim2moving = ^anm_idle_aim.*, ^anm_idle_moving.*, anm_aim2idle, 4
        ts_pattern_aim2sprint = ^anm_idle_aim.*, ^anm_idle_sprint.*, anm_aim2idle, 4
        ;ts_pattern_i2a2idle = ^anm_idle2aim.*, ^anm_idle$, anm_aim2idle, 1
        ;ts_pattern_i2a2idle_fix = ^anm_idle2aim.*, ^anm_idle_.*, anm_aim2idle, 1

        anm_aim2idle = h_m590_aim2idle, m590_idle
        anm_aim2idle_jammed = h_m590_aim2idle_jammed, m590_idle_jammed


        ts_pattern_idle2sprint = ^anm_idle.*, ^anm_idle_sprint.*, anm_idle2sprint, 3
        anm_idle2sprint = h_m590_idle2sprint, m590_idle, 1.2
        anm_idle2sprint_jammed = h_m590_idle2sprint_jammed, m590_idle_jammed, 1.2

        ts_pattern_sprint2idle = ^anm_idle_sprint.*, ^anm_idle.*, anm_sprint2idle, 3
        anm_sprint2idle = h_m590_sprint2idle, m590_idle
        anm_sprint2idle_jammed = h_m590_sprint2idle_jammed, m590_idle_jammed